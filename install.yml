# turn shallow clone off for sonar
git:
  depth: false

addons:
  sonarcloud:
    organization: $SONAR_ORG

install:
  - mkdir -p ../utils
  - curl -Ls https://github.com/s4u/travis/archive/master.tar.gz |
    tar -zx --strip-components 2 -C ../utils travis-master/src

before_script:
  - ../utils/print-env.sh
  - echo "SONAR_ORG = $SONAR_ORG"
  - echo "M2_CACHE_CLEAN_DIR = $M2_CACHE_CLEAN_DIR"

cache:
  directories:
    - $HOME/.m2/repository

before_cache:
  - if [ -n "$M2_CACHE_CLEAN_DIR" ]; then rm -rfv $HOME/.m2/repository/$M2_CACHE_CLEAN_DIR; fi

#  - [ -n "$M2_CACHE_CLEAN_DIR" ] && rm -rfv $HOME/.m2/repository/$M2_CACHE_CLEAN_DIR
